<!DOCTYPE html>
<html>
  <head>
    <title>Snake</title>

    <!-- Docs: https://alpinejs.dev/start-here -->
    <script src="https://unpkg.com/alpinejs" defer></script>

    <!-- Docs: https://tailwindcss.com/ -->
    <script src="https://cdn.tailwindcss.com"></script>
  </head>

  <body 
    autofocus 
    tabindex="-1"
    x-data="{ grid: [], speed: 1, direction: 'right' }"
    x-on:keyup="console.log(event)"
    x-on:keyup.h="$store.snake.moveLeft()"
    x-on:keyup.l="$store.snake.moveRight()"
    x-on:keyup.k="$store.snake.moveUp()"
    x-on:keyup.j="$store.snake.moveDown()"
  >
    <main class="flex flex-col items-center gap-4 mt-4"> 
      <div>
        Position: (<span x-text="$store.snake.x"></span>, <span x-text="$store.snake.y"></span>)
      </div>
      <table 
        class="border-spacing-0"
      >
        <tbody>
          <template x-for="row in 10">
            <tr class="border border-neutral" >
              <template x-for="col in 10">
                <td class="p-4 border border-neutral">
                  <span 
                    x-text="
                      $store.snake.x === col - 1 && $store.snake.y === row - 1
                      ? '**'
                      : col + row
                    "
                  >
                  </span>
                </td>
              </template>
            </tr>
          </template>
        </tbody>
      </table>
    </main>
  </body>
  <script>
    document.addEventListener('alpine:init', () => {
      Alpine.store('snake', {
        x: 0,
        y: 0,
        speed: 0,

        moveLeft() {
          if (this.x === 0) {
          this.x = 9;
          } else {
          this.x -= 1;
          }
        },

        moveRight() {
          if (this.x === 9) {
          this.x = 0;
          } else {
          this.x += 1;
          }
        },

        moveUp() {
          if (this.y === 0) {
          this.y = 9;
          } else {
          this.y -= 1;
          }
        },

        moveDown() {
          if (this.y === 9) {
          this.y = 0;
          } else {
          this.y += 1;
          }
        },
      })
    })
  </script>
</html>
